<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Review</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
  <div class="mt-3 pb-5">
    <div class="container">
      <div class="row">
        <div class="my-md-5 my-sm-0 d-flex flex-wrap flex-wrap justify-content-around">
          <img src="./../imgs/review.png" class="col-md-6">
          <div class="card col-md-5 col-xs-12 shadow p-md-4 px-5 w-xs-100 w-md-auto">
            <h4 class="my-3">WRITE A REVIEW</h4>
            <p class="mb-2">Name : </p>
            <input type="text" placeholder="Enter Name" required class="mb-4 p-2 px-3 rounded border border-black"
              id="input-Name">
            <p class="mb-2 col-6">Review : </p>
            <textarea name="Message" rows="4" placeholder="Write Your Review" required
              class="p-3 rounded border border-black" id="input-Msg"></textarea>
            <div class="mt-4 mb-4">
              <button type="button" class="px-4 py-2 rounded" onclick="cancelReview()">&nbsp; Cancel &nbsp;</button>
              <button type="button" class="px-5 py-2 rounded border bag" onclick="addReview()">Post</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="p-5">
    <div class="container">
      <h1 class="text-center mb-4">WHAT PEOPLE SAY</h1>
      <div class="row">
        <div class=" d-flex flex-wrap justify-content-evenly p-md-4" id="review-Box">
        </div>
      </div>
    </div>
  </div>
  <script>
    let reviewListName = [];
let reviewListMsg = [];

const reviewBox = document.getElementById("review-Box");

const reviewNameItemsLS = localStorage.getItem("reviewListName");
const reviewMsgItemsLS = localStorage.getItem("reviewListMsg");

if(reviewNameItemsLS){
    reviewListName = JSON.parse(reviewNameItemsLS);
    reviewListMsg = JSON.parse(reviewMsgItemsLS);
    loadList();
}

function addReview(){
    const inputName = document.getElementById("input-Name");
    const name = inputName.value;
    const inputMsg = document.getElementById("input-Msg");
    const msg = inputMsg.value;

    if (name) {
        reviewListName.push(name);
        reviewListMsg.push(msg);

        localStorage.setItem("reviewListName", JSON.stringify(reviewListName));
        localStorage.setItem("reviewListMsg", JSON.stringify(reviewListMsg));

        inputName.value = "";
        inputMsg.value = "";
        loadList();
    }
    else {
        alert("Please enter name");
    }
}

function loadList() {
    reviewBox.innerHTML = "";

    for (let i = 0; i < reviewListName.length; i++) {
        let name = reviewListName[i];
        let msg = reviewListMsg[i];
        reviewBox.innerHTML = reviewBox.innerHTML + `<div class="card p-3 col-md-3 col-xs-12 col-sm-4 shadow m-4">
        <h4 class="text-center mt-3">${name}</h4>
        <img src="../imgs/review-img.png" class="wdt bag p-2 d-block m-auto rounded-circle my-3">
        <p class="mt-1 m-2 text-center">${msg}</p>
        <p role="button" class="link-danger mt-4 mb-0 text-center" onclick="removeReview(${i})">Remove</p>
    </div>`;
    }
}
function removeReview(index) {
    reviewListName.splice(index, 1);
    reviewListMsg.splice(index, 1);

    localStorage.setItem("reviewListName", JSON.stringify(reviewListName));
    localStorage.setItem("reviewListMsg", JSON.stringify(reviewListMsg));

    loadList();
}
function cancelReview(){
    const inputName = document.getElementById("input-Name");
    const name = inputName.value;
    const inputMsg = document.getElementById("input-Msg");
    const msg = inputMsg.value;

    inputName.value = "";
    inputMsg.value = "";
}
  </script>
</body>
</html>